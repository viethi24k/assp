@@model IEnumerable<BaiKiemtra03_04.Models.Supplier>

    @{
        ViewData["Title"] = "Suppliers";
    }

    <h2>Suppliers</h2>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Any())
            {
                foreach (var supplier in Model)
                {
                    <tr>
                        <td>@supplier.Name</td>
                        <td>@supplier.Address</td>
                        <td>@supplier.Phone</td>
                        <td>@supplier.Email</td>
                        <td>
                            <a asp-action="Upsert" asp-route-id="@supplier.Id" class="btn btn-primary">Edit</a>
                            <button class="btn btn-danger" onclick="deleteSupplier(@supplier.Id)">Delete</button>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center">No suppliers found.</td>
                </tr>
            }
        </tbody>
    </table>

    <a asp-action="Upsert" asp-route-id="0" class="btn btn-success">Create New Supplier</a>

    @section Scripts {
        <script>
            function deleteSupplier(id) {
                if (confirm('Are you sure you want to delete this supplier?')) {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("Delete", "Supplier")',
                        data: { id: id },
                        success: function (response) {
                            if (response.success) {
                                location.reload();
                            }
                        },
                        error: function () {
                            alert('Error deleting supplier.');
                        }
                    });
                }
            }
        </script>
    }
